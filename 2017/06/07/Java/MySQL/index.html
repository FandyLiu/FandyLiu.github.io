<!DOCTYPE html>


  <html class="light page-post">


<head>
  <meta charset="utf-8">
  
  <title>MySQL | Fandy&#39;s Blog</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="数据库,MySQL," />
  

  <meta name="description" content="数据库的概述数据库(DataBase:DB)： 数据库是按照数据结构来组织、存储和管理数据的仓库。 数据库管理系统(Database Management System:DBMS)： 是专门用于管理数据库的计算机系统软件。数据库管理系统能够为数据库提供数据的定义、建立、维护、查询和统计等操作功能，并完成对数据完整性、安全性进行控制的功能。 数据库应用系统(DataBase Application">
<meta name="keywords" content="数据库,MySQL">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL">
<meta property="og:url" content="https://fandyliu.github.io/2017/06/07/Java/MySQL/index.html">
<meta property="og:site_name" content="Fandy&#39;s Blog">
<meta property="og:description" content="数据库的概述数据库(DataBase:DB)： 数据库是按照数据结构来组织、存储和管理数据的仓库。 数据库管理系统(Database Management System:DBMS)： 是专门用于管理数据库的计算机系统软件。数据库管理系统能够为数据库提供数据的定义、建立、维护、查询和统计等操作功能，并完成对数据完整性、安全性进行控制的功能。 数据库应用系统(DataBase Application">
<meta property="og:image" content="https://fandyliu.github.io/2017/06/07/Java/MySQL/">
<meta property="og:image" content="https://fandyliu.github.io/2017/06/07/Java/MySQL/">
<meta property="og:image" content="https://fandyliu.github.io/2017/06/07/Java/MySQL/">
<meta property="og:updated_time" content="2017-06-07T07:10:51.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="MySQL">
<meta name="twitter:description" content="数据库的概述数据库(DataBase:DB)： 数据库是按照数据结构来组织、存储和管理数据的仓库。 数据库管理系统(Database Management System:DBMS)： 是专门用于管理数据库的计算机系统软件。数据库管理系统能够为数据库提供数据的定义、建立、维护、查询和统计等操作功能，并完成对数据完整性、安全性进行控制的功能。 数据库应用系统(DataBase Application">
<meta name="twitter:image" content="https://fandyliu.github.io/2017/06/07/Java/MySQL/">

  

  
    <link rel="icon" href="/favicon.png">
  

  <link href="/css/styles.css?v=c114cbe6" rel="stylesheet">


  
    <link rel="stylesheet" href="/css/personal-style.css">
  

  

  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?57e94d016e201fba3603a8a2b0263af0";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


  
  <script type="text/javascript">
	(function(){
	    var bp = document.createElement('script');
	    var curProtocol = window.location.protocol.split(':')[0];
	    if (curProtocol === 'https') {
	        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
	    }
	    else {
	        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
	    }
	    var s = document.getElementsByTagName("script")[0];
	    s.parentNode.insertBefore(bp, s);
	})();
  </script>



  
    <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  

  
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">
  
</head>

<body>


  
    <span id="toolbox-mobile" class="toolbox-mobile">盒子</span>
  

  <div class="post-header CENTER">
   
  <div class="toolbox">
    <a class="toolbox-entry" href="/">
      <span class="toolbox-entry-text">盒子</span>
      <i class="icon-angle-down"></i>
      <i class="icon-home"></i>
    </a>
    <ul class="list-toolbox">
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/archives/"
            rel="noopener noreferrer"
            target="_self"
            >
            博客
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/category/"
            rel="noopener noreferrer"
            target="_self"
            >
            分类
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/tag/"
            rel="noopener noreferrer"
            target="_self"
            >
            标签
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/link/"
            rel="noopener noreferrer"
            target="_self"
            >
            友链
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/about/"
            rel="noopener noreferrer"
            target="_self"
            >
            关于
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/atom.xml"
            rel="noopener noreferrer"
            target="_blank"
            >
            RSS
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/search/"
            rel="noopener noreferrer"
            target="_self"
            >
            搜索
          </a>
        </li>
      
    </ul>
  </div>


</div>


  <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#数据库的概述"><span class="toc-text">数据库的概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL"><span class="toc-text">SQL</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#启动和连接-MySQL"><span class="toc-text">启动和连接 MySQL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#启动-MySQL-服务"><span class="toc-text">启动 MySQL 服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#连接数据库"><span class="toc-text">连接数据库:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Mac-上安装问题"><span class="toc-text">Mac 上安装问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#远程连接问题"><span class="toc-text">远程连接问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数据库的基本操作"><span class="toc-text">数据库的基本操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数据类型"><span class="toc-text">数据类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#表的基本操作"><span class="toc-text">表的基本操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#表的约束"><span class="toc-text">表的约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#过滤查询"><span class="toc-text">过滤查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查询结果排序"><span class="toc-text">查询结果排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#分页查询"><span class="toc-text">分页查询</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#beginIndex-当前页数-1-pageSize"><span class="toc-text">beginIndex = (当前页数 - 1) * pageSize</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#聚集函数"><span class="toc-text">聚集函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#笛卡尔积"><span class="toc-text">笛卡尔积</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#外键约束"><span class="toc-text">外键约束</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#内连接查询"><span class="toc-text">内连接查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#自连接查询"><span class="toc-text">自连接查询:</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DML"><span class="toc-text">DML</span></a></li></ol></li></ol></li></ol>
  </div>



<div class="content content-post CENTER">
   <article id="post-Java/MySQL" class="article article-type-post" itemprop="blogPost">
  <header class="article-header">
    <h1 class="post-title">MySQL</h1>

    <div class="article-meta">
      <span>
        <i class="icon-calendar"></i>
        <span>2017.06.07</span>
      </span>

      
        <span class="article-author">
          <i class="icon-user"></i>
          <span>Fandy</span>
        </span>
      

      
  <span class="article-category">
    <i class="icon-list"></i>
    <a class="article-category-link" href="/categories/Java/">Java</a>
  </span>



      
        <span>
          <i class="icon-comment"></i>
          <a href="https://fandyliu.github.io/2017/06/07/Java/MySQL/#disqus_thread"></a>
        </span>
      

      
      <i class="fa fa-eye"></i> 
        <span id="busuanzi_container_page_pv">
           &nbsp热度 <span id="busuanzi_value_page_pv">
           <i class="fa fa-spinner fa-spin"></i></span>℃
        </span>
      

      
      
    </div>
  </header>

  <div class="article-content">
    
      <h2 id="数据库的概述"><a href="#数据库的概述" class="headerlink" title="数据库的概述"></a>数据库的概述</h2><p><strong>数据库(DataBase:DB)：</strong> 数据库是按照数据结构来组织、存储和管理数据的仓库。</p>
<p><strong>数据库管理系统(Database Management System:DBMS)：</strong> 是专门用于管理数据库的计算机系统软件。数据库管理系统能够为数据库提供数据的定义、建立、维护、查询和统计等操作功能，并完成对数据完整性、安全性进行控制的功能。</p>
<p><strong>数据库应用系统(DataBase Application System:DBAS)：</strong> 使用数据库技术的系统； 数据库应用系统有很多，基本上所有的信息系统都是数据库应用系统。它通常由软件、数据库和数据管理员组成。</p>
<p><strong><em>数据库技术发展历程：</em></strong></p>
<ol>
<li><p>层次数据库和网状数据库技术阶段:<br>使用指针来表示数据之间的联系。</p>
</li>
<li><p>关系数据库技术阶段:<br> 经典的里程碑阶段。 RDBMS 指关系型数据库管理系统，全称 Relational Database Management System。RDBMS 是 SQL 的基础，同样也是所有现代数据库系统的基础，比如 MS SQL Server、IBM DB2、Oracle、MySQL 以及 Microsoft Access。<br>RDBMS 中的数据存储在被称为表的数据库对象中。<br>表是相关的数据项的集合，它由列和行组成。</p>
</li>
</ol>
<p>常见的关系数据库:</p>
<table>
<thead>
<tr>
<th style="text-align:center">数据库系统</th>
<th style="text-align:center">所属公司</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">  Oracle</td>
<td style="text-align:center">Oracle</td>
</tr>
<tr>
<td style="text-align:center">  DB2</td>
<td style="text-align:center">IBM</td>
</tr>
<tr>
<td style="text-align:center">  SQL Server</td>
<td style="text-align:center">MS</td>
</tr>
<tr>
<td style="text-align:center">  MySQL</td>
<td style="text-align:center">AB–&gt;SUN–&gt;Oracle</td>
</tr>
</tbody>
</table>
<p>Oracle:运行稳定，可移植性高，功能齐全，性能超群！适用于大型企业领域。<br>DB2：速度快、可靠性好，适于海量数据，恢复性极强。适用于大中型企业领域。<br>SQL Server:全面，效率高，界面友好，操作容易，但是不跨平台。适用于于中小型企业领域。<br>MySQL:开源，体积小，速度快。适用于于中小型企业领域。</p>
<ol>
<li>后关系数据库技术阶段；<br> 关系型数据库存在数据模型，性能，拓展伸缩性的缺点，出现了：<br> ORDBMS：面向对象数据库技术。<br> NoSQL ：结构化数据库技术。</li>
</ol>
<p>随着大数据的不断发展，非关系型的数据库现在成了一个极其热门的新领域，非关系数据库产品的发展非常迅速，出色的NoSQL数据库：<br><strong>常见的NoSQL数据库分为四大类：</strong><br>1):键值存储数据库：Oracle BDB,Redis,BeansDB<br>2):列式储数数据库：HBase,Cassandra,Riak<br>3):文档型数据库：MongoDB,CouchDB<br>4):图形数据库：Neo4J,InfoGrid,Infinite Graph</p>
<h2 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h2><p><strong>SQL：</strong> 结构化查询语言(Structured Query Language), 是关系型数据库标准语言。SQL 是用于访问和处理数据库的标准的计算机语言。<br><strong>特点：</strong> 简单，灵活，功能强大。</p>
<p><strong>SQL包含6个部分：</strong><br>一：数据查询语言（Data Query Language，DQL）：<br>其语句，也称为“数据检索语句”，用以从表中获得数据，确定数据怎样在应用程序给出。保留字SELECT是DQL（也是所有SQL）用得最多的动词，其他DQL常用的保留字有WHERE，ORDER BY，GROUP BY和HAVING。这些DQL保留字常与其他类型的SQL语句一起使用。<br>二：数据操作语言（Data Manipulation Language，DML）：<br>其语句包括动词INSERT，UPDATE和DELETE。它们分别用于添加，修改和删除表中的行。也称为动作查询语言。<br>三：事务处理语言（Transaction Processing Language，TPL）：<br>它的语句能确保被DML语句影响的表的所有行及时得以更新。TPL语句包括BEGIN TRANSACTION，COMMIT和ROLLBACK。<br>四：数据控制语言（Data Control Language，DCL）：<br>它的语句通过GRANT或REVOKE获得许可，确定单个用户和用户组对数据库对象的访问。某些RDBMS可用GRANT或REVOKE控制对表单个列的访问。<br>五：数据定义语言（Data Definition Language，DDL）：<br>其语句包括动词CREATE和DROP。在数据库中创建新表或删除表（CREAT TABLE 或 DROP TABLE）；为表加入索引等。DDL包括许多与人数据库目录中获得数据有关的保留字。它也是动作查询的一部分。<br>六：指针控制语言（CCL）：<br>它的语句，像DECLARE CURSOR，FETCH INTO和UPDATE WHERE CURRENT用于对一个或多个表单独行的操作。</p>
<p>书写规则：</p>
<ol>
<li>在MySQL数据库中，SQL语句大小写不敏感</li>
<li>SQL语句可单行或多行书写</li>
<li>在SQL语句中，关键字不能跨多行或缩写</li>
<li>为了提高可读性，一般关键字大写，其他小写</li>
<li>空格和缩进使程序易读</li>
</ol>
<p>什么是表(table)？<br>我们说 MySQL 是一种关系型数据库。关系数据库最重要的概念就是表。<br>表具有固定的列数和任意的行数，在数学上称为“关系”。</p>
<p>二维表是同类实体的各种属性的集合，每个对象对应于表中的一行，在关系中称为元组，相当于通常的一条记录；<br>表中的列表示属性，称为Field，相当于通常记录中的一个数据项，也叫列、字段。</p>
<h2 id="启动和连接-MySQL"><a href="#启动和连接-MySQL" class="headerlink" title="启动和连接 MySQL"></a>启动和连接 MySQL</h2><h3 id="启动-MySQL-服务"><a href="#启动-MySQL-服务" class="headerlink" title="启动 MySQL 服务"></a>启动 MySQL 服务</h3><p>要访问数据库,必须将MySQL服务启动<br>启动服务的方式:<br>方式一: 在服务列表中点击启动<br>方式二: 在运行窗口(win+r)中使用windows命令<br>net start 服务名称: <code>net start mysql</code><br>net stop 服务名称:  <code>net stop mysql</code></p>
<h3 id="连接数据库"><a href="#连接数据库" class="headerlink" title="连接数据库:"></a>连接数据库:</h3><p>方式一:使用MySQL自带的命令行窗口,只需要输入密码即可<br>方式二:使用命令连接数据库</p>
<p>mysql -u用户名 -p密码 -h主机ip地址 -P端口<br>mysql -uroot -padmin -hlocalhost -P3306</p>
<p>如果连接的数据库在本机上,而且端口是默认的3306<br>mysql -u用户名 -p密码<br>mysql -uroot -padmin</p>
<p><strong>修改密码</strong><br>用 <code>SET PASSWORD FOR &#39;root&#39;@&#39;localhost&#39; = PASSWORD(&#39;newpassword&#39;);</code></p>
<h3 id="Mac-上安装问题"><a href="#Mac-上安装问题" class="headerlink" title="Mac 上安装问题"></a>Mac 上安装问题</h3><p>msyql 5.7.11版本安装<br>mysql 生成的 root 的临时密码是<br>2016-05-10 T10:05:47.421912Z 1 [Note] A temporary password is generated for root@localhost: v:gNXSw5FTkw<br>使用<br>mysql -u root -p  v:usHT7pZ&gt;4(xz </p>
<p>Your password has expired. To log in you must change it using a client that supports expired passwords</p>
<p>在 stackoverflow 找到了解决方法<br>连接地址：<a href="http://stackoverflow.com/questions/33387879/mysql-password-expired-cant-connect" target="_blank" rel="external">http://stackoverflow.com/questions/33387879/mysql-password-expired-cant-connect</a><br>解决办法：<br><code>mysqladmin -uroot -p password</code></p>
<p>Enter password:   //这里输入上面的v:usHT7pZ&gt;4(xz</p>
<p>New password:    //重新输入新密码</p>
<p>Confirm new password: //重新输入新密码</p>
<p>问题解决！</p>
<h3 id="远程连接问题"><a href="#远程连接问题" class="headerlink" title="远程连接问题"></a>远程连接问题</h3><p>Host is not allowed to connect to this MySQL server 解决方法</p>
<blockquote>
<p>今天在 Mac 上面装完 MySQL，却发现在本地登录可以，但是远程登录却报错 Host is not allowed to connect to this MySQL server， 现在记录下解决办法。</p>
<p>先说说这个错误，其实就是我们的 MySQL 不允许远程登录，所以远程登录失败了，解决方法如下：</p>
</blockquote>
<ol>
<li>在装有MySQL的机器上登录 MySQL <code>mysql -uroot -p密码</code></li>
<li>执行 <code>use mysql</code>;</li>
<li>执行 <code>update user set host = &#39;%&#39; where user = &#39;root&#39;</code>;这一句执行完可能会报错，不用管它。</li>
<li>执行 <code>FLUSH PRIVILEGES</code>;</li>
</ol>
<p>经过上面4步，就可以解决这个问题了。<br>注: 第四步是刷新 MySQL 的权限相关表，一定不要忘了，我第一次的时候没有执行第四步，结果一直不成功，最后才找到这个原因。</p>
<h2 id="数据库的基本操作"><a href="#数据库的基本操作" class="headerlink" title="数据库的基本操作"></a>数据库的基本操作</h2><p>数据库对象：存储，管理和使用数据的不同结构形式，如：表、视图、存储过程、函数、触发器、事件等。<br>数据库：存储数据库对象的容器。</p>
<p><strong>数据库分两种：</strong><br>   1）：系统数据库（系统自带的数据库）：不能修改<br>        information_schema:存储数据库对象信息，如：用户表信息，列信息，权限，字符，分区等信息。<br>        performance_schema:存储数据库服务器性能参数信息。<br>        mysql:存储数据库用户权限信息。<br>        test:任何用户都可以使用的测试数据库。</p>
<p>   2）：用户数据库（用户自定义的数据库）：一般的，一个项目一个用户数据库。</p>
<ul>
<li>查看数据库服务器存在哪些数据库：</li>
</ul>
<pre><code>SHOW  DATABASES;
<figure class="highlight clean"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">* 使用指定的数据库：</div><div class="line"></div><div class="line">```USE database_name;</div></pre></td></tr></table></figure>


* 查看指定的数据库中有哪些数据表:
</code></pre><p>SHOW TABLES;</p>
<pre><code>
* 创建指定名称的数据库：
</code></pre><p>CREATE DATABASE database_name;<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="bullet">* </span>删除数据库：</div></pre></td></tr></table></figure></p>
<p>DROP DATABASE database_name;<br>```</p>
<p>MySQL 中的数据用各种不同的技术存储在文件（或者内存）中。这些技术中的每一种技术都使用不同的存储机制、索引技巧、锁定水平并且最终提供不同的功能和能力。<br>通过选择不同的技术，你能够获得额外的速度或者功能，从而改善你的应用的整体功能。</p>
<p>MyISAM：拥有较高的插入，查询速度，但不支持事务，不支持外键。<br>InnoDB：支持事务，支持外键，支持行级锁定，性能较低。</p>
<p>InnoDB 存储引擎提供了具有提交、回滚和崩溃恢复能力的事务安全。但对比MyISAM，处理效率差，且会占用更多的磁盘空间以保留数据和索引。</p>
<p><img src="/2017/06/07/Java/MySQL/" alt="图片"></p>
<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><p>最常用的整数类型：</p>
<p>MySQL列类型               Java数据类型</p>
<p>MySQL 以一个可选的显示宽度指示器的形式对 SQL 标准进行扩展，这样当从数据库检索一个值时，可以把这个值加长到指定的长度。<br>例如，指定一个字段的类型为 INT(6)，就可以保证所包含数字少于 6 个的值从数据库中检索出来时能够自动地用空格填充。<br>需要注意的是，使用一个宽度指示器不会影响字段的大小和它可以存储的值的范围。一般不用指定位宽。</p>
<p>FLOAT[(s,p)]   ：<br>DOUBLE[(s,p)]  ： 小数类型，可存放实型和整型 ,范围(s)和精度(p)<br>                  money double(5,2): 整数和小数一共占5为.其中小数占2位.<br>                  都不够精确。999.99<br>定点数据类型： DECIMAL，高精度类型，金额货币优先选择。</p>
<p>MySQL列类型Java数据类型<br>:-:|:-:<br>INT | int/Integer<br>BIGINT | long/Long<br>|<br>FLOAT | float/Float<br>DOUBLE | double/Double<br>DECIMAL | BigDecimal</p>
<p>char(size)      定长字符，0 - 255字节，size指N个字符数，若插入字符数超过设定长度，会被截取并警告。<br>varchar(size) :     变长字符，0 - 255字节，从MySQL5开始支持65535个字节，若插入字符数超过设定长度，会被截取并警告。</p>
<p>一般存储大量的字符串，比如文章的纯文本，可以选用TEXT系列类型。</p>
<p>注意:在MySQL中，字符使用<strong>单引号</strong>引起来。 相当于Java中字符串(String,StringBuilder/StringBuffer);</p>
<p><img src="/2017/06/07/Java/MySQL/" alt="图"></p>
<p>日期和时间类型为DATETIME、DATE、TIMESTAMP、TIME和YEAR。<br>注意:在MySQL中，日期时间值使用<strong>单引号</strong>引起来。 相当于Java中Date，Calender。</p>
<p>BINARY、VARBINARY、TINYBLOB、BLOB、MEDIUMBLOB、LONGBLOB：<br>存放图形、声音和影像，二进制对象，0-4GB。<br>开发中，我们一般存储二进制文件保存路径。</p>
<p>BIT：我们一般存储0或1，存储是Java中的boolean/Boolean类型的值。</p>
<h2 id="表的基本操作"><a href="#表的基本操作" class="headerlink" title="表的基本操作"></a>表的基本操作</h2><p>1.先进入某一个数据库；USE DATABASE_NAME</p>
<p>2.输入建表的命令；<br>CREATE TABLE 表名(<br>   列名1    列的类型   [约束],<br>   列名2    列的类型   [约束],<br>   ….<br>   列名N    列的类型   约束<br>);<br>注意:最后一行没有逗号<br>需求:创建一张学生信息表(编号,姓名,年龄,性别)<br>CREATE TABLE <code>student</code> (<br>   id bigint PRIMARY KEY AUTO_INCREMENT,<br>  <code>name</code> varchar(20) not null,<br>  <code>age</code> int(11) DEFAULT NULL,<br>  <code>sex</code> int(11) DEFAULT NULL<br>) ENGINE=InnoDB DEFAULT CHARSET=utf8;</p>
<p>SQL命令中不能使用关键字或者保留字来命名<br>比如:创建一张订单表(order),order 在sql中是用来做排序,所有不能使用<br>解决方案:<br>1.在名称前后加上反引号``<br>2.在名称前加上一个前缀: t_order</p>
<p>查看数据库中有哪些表：<br>SHOW TABLES;<br>查看表结构：<br>DESC table_name;<br>查看表的详细定义：<br>SHOW CREATE TABLE table_name;<br>删除表：<br>DROP TABLE table_name;</p>
<h3 id="表的约束"><a href="#表的约束" class="headerlink" title="表的约束"></a>表的约束</h3><p>表的约束(针对于某一列):<br>1.非空约束：NOT NULL，不允许某列的内容为空。<br>2.设置列的默认值：DEFAULT。<br>3.唯一约束：UNIQUE:UK，在该表中，该列的内容必须唯一。<br>4.主键约束：PRIMARY KEY:PK， 非空且唯一。<br>5.主键自增长：AUTO_INCREMENT，从1开始，步长为1。<br>6.外键约束：FOREIGN KEY，A表中的外键列. A表中的外键列的值必须参照于B表中的某一列(B表主键)<br>主键设计：<br>1：单字段主键，单列作为主键，建议使用。<br>   复合主键，使用多列充当主键，不建议。<br>2：主键分为两种:<br>   1）.自然主键:使用有业务含义的列作为主键(不推荐使用);<br>   2）.代理主键:使用没有业务含义的列作为主键(推荐使用);<br>简单查询</p>
<p>语法：<br>SELECT    {*, column [alias],…}<br>FROM    table_name;</p>
<p>消除结果中重复的数据。<br>语法：<br>SELECT    DISTINCT 列名，…<br>FROM    table_name;</p>
<p>对NUMBER型数据可以使用算数操作符创建表达式（+  -  *  /）<br>对DATE型数据可以使用部分算数操作符创建表达式 （+  -）</p>
<p><em>如果别名中使用特殊字符，或者是强制大小写敏感，或有空格时，都需加单引号；<br>通常列的别名不要使用引号,会影响排序</em></p>
<p>SELECT    {*, column [AS] 别名,…}<br>FROM    table_name;</p>
<p>为方便用户浏览查询的结果数据，有时需要设置显示格式，可以使用CONCAT函数来连接字符串。</p>
<p>SELECT CONCAT(productName,’商品的零售价为：’,salePrice) AS productSalePrice FROM product;</p>
<h3 id="过滤查询"><a href="#过滤查询" class="headerlink" title="过滤查询"></a>过滤查询</h3><p>使用WHERE子句限定返回的记录：<br>语法：<br>SELECT  <selectlist><br>FROM     table_name<br>WHERE    条件;</selectlist></p>
<p>注意：<br>WHERE子句在 FROM 子句后</p>
<table>
<thead>
<tr>
<th style="text-align:center">运算符</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">=</td>
<td style="text-align:center">等于</td>
</tr>
<tr>
<td style="text-align:center">&gt;</td>
<td style="text-align:center">大于</td>
</tr>
<tr>
<td style="text-align:center">&gt;=</td>
<td style="text-align:center">大于或等于</td>
</tr>
<tr>
<td style="text-align:center">&lt;</td>
<td style="text-align:center">小于</td>
</tr>
<tr>
<td style="text-align:center">&lt;=</td>
<td style="text-align:center">小于或等于</td>
</tr>
<tr>
<td style="text-align:center">!=(&lt;&gt;)</td>
<td style="text-align:center">不等于</td>
</tr>
</tbody>
</table>
<p>注意：字符串和日期要用单引号扩起来.</p>
<p>要让MySQL查询<code>区分大小</code>写，可以： BINARY<br>SELECT <em> FROM table_name WHERE BINARY productName=’g9x’<br>SELECT </em> FROM table_name WHERE BINARY productName=’G9X’</p>
<table>
<thead>
<tr>
<th style="text-align:center">运算符</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">AND(&amp;&amp;)</td>
<td style="text-align:center">如果组合的条件都是TRUE,返回TRUE</td>
</tr>
<tr>
<td style="text-align:center">OR(</td>
<td style="text-align:center"></td>
<td>)</td>
<td>如果组合的条件之一是TRUE,返回TRUE</td>
</tr>
<tr>
<td style="text-align:center">NOT(!)</td>
<td style="text-align:center">如果下面的条件是FALSE,返回TRUE`</td>
</tr>
</tbody>
</table>
<p>优先级 NOT &gt; AND &gt; OR</p>
<p>使用BETWEEN运算符显示某一值域范围的记录，这个操作符最常见的使用在数字类型数据的范围上，但对于字符类型数据和日期类型数据同样可用。<br>格式：<br>WHERE 列名 BETWEEN minvalue AND maxvalue：闭区间。</p>
<p>使用IN运算符，判断列的值是否在指定的集合中。</p>
<p>格式： WHERE 列名 IN (值1，值2….);</p>
<p>IS NULL:判断列的值是否为空。</p>
<p>格式：WHERE  列名 IS NULL;</p>
<p>使用LIKE运算符执行通配查询，查询条件可包含文字字符或数字：<br>%通配符：可表示零或多个字符。<br>_通配符：可表示一个字符。</p>
<h3 id="查询结果排序"><a href="#查询结果排序" class="headerlink" title="查询结果排序"></a>查询结果排序</h3><p>使用ORDER BY子句将查询结果按照某种规则排序</p>
<p>格式：<br>SELECT <selectlist><br>FROM table_name<br>WHERE 条件<br>ORDER BY 列名1 [ASC/DESC],列名2 [ASC/DESC]…;</selectlist></p>
<p>SELECT语句执行顺序：<br>先执行FROM—&gt;接着执行WHERE—&gt;再执行SELECT—&gt;最后执行ORDER BY</p>
<h3 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h3><p>分页的分类:<br>    假分页:一次性将所有的数据查询出来放到内存中,每次翻页都从内存中去截取<br>    真分页:每次都从数据库中取查询</p>
<pre><code>假分页的优缺点:如果数据过多,可能会造成内存溢出;翻页速度快.
真分页的优缺点:速度相对较慢,但是不会造成内存溢出;(推荐)
</code></pre><p>语法:<br>SELECT    column1, column2…<br>FROM    table_name<br>[WHERE    condition]<br>LIMIT beginIndex, pageSize;<br>beginIndex: 是开始索引(从0开始):第一条记录:0,第二条记录:1<br>pageSize: 每页显示多少条数据</p>
<h2 id="beginIndex-当前页数-1-pageSize"><a href="#beginIndex-当前页数-1-pageSize" class="headerlink" title="beginIndex = (当前页数 - 1) * pageSize"></a>beginIndex = (当前页数 - 1) * pageSize</h2><h3 id="聚集函数"><a href="#聚集函数" class="headerlink" title="聚集函数"></a>聚集函数</h3><p>什么是聚集函数：(数据统计)<br>聚集函数作用于一组数据，并对一组数据返回一个值。</p>
<p>COUNT：统计结果记录数<br>MAX：  统计计算最大值<br>MIN：  统计计算最小值<br>SUM：  统计计算求和<br>AVG：  统计计算平均值</p>
<h3 id="笛卡尔积"><a href="#笛卡尔积" class="headerlink" title="笛卡尔积"></a>笛卡尔积</h3><p>单表查询:从一张表中查询数据<br>多表查询:从多张表中联合查询出数据</p>
<p>单表查询:<br>SELECT 列名1,列名2,列名3…<br>FROM  表名</p>
<p>多表查询(最简单的):<br>SELECT <selectlist><br>FROM  表名A , 表名B</selectlist></p>
<p>没有连接条件的表关系返回的结果。<br>多表查询会产生笛卡尔积:<br>假设集合A={a,b}，集合B={0,1,2}，则两个集合的笛卡尔积为{(a,0),(a,1),(a,2),(b,0),(b,1),(b,2)}。<br>实际运行环境下，应避免使用全笛卡尔集。</p>
<p>解决方案: 在WHERE加入有效的连接条件—-&gt;等值连接<br>注意:<br>连接 n张表,至少需要 n-1个连接条件。</p>
<h4 id="外键约束"><a href="#外键约束" class="headerlink" title="外键约束"></a>外键约束</h4><p>主键约束(PRIMARY KEY:PK): 约束在当前表中,指定列的值非空且唯一.<br>外键约束(FOREIGN KEY:FK): A表中的外键列. A表中的外键列的值必须参照于B表中的某一列(B表主键).</p>
<pre><code>注意:在MySQL中,InnoDB支持事务和外键.
修改表的存储引擎为InnoDB:
ALTER TABLE 表名 ENGINE=&apos;InnoDB&apos;;

主表:该表中的数据可以独立存在
从表:该表中的数据要依赖于其他表中的数据,有外键列的表为从表

外键列的定义规范:
约定优于配置
主键:id
外键命名:xxx_id,xxx:参照表的名称,productdir_id,也可以使用缩写,dir_id
</code></pre><h3 id="内连接查询"><a href="#内连接查询" class="headerlink" title="内连接查询"></a>内连接查询</h3><p>内连接分为：隐式内连接、显示内连接，其查询效果相同。</p>
<hr>
<p>隐式内连接：<br>SELECT    <selectlist><br>FROM    A ,B<br>WHERE A.列 = B.列</selectlist></p>
<hr>
<p>显示内连接(推荐写法)：.<br>SELECT    <selectlist><br>FROM    A [INNER] JOIN B ON A.列 = B.列</selectlist></p>
<hr>
<p>在做等值连接的时候,若A表中和B表中的参照的列名相同. 则可以简写:<br>SELECT    <selectlist><br>FROM    A [INNER] JOIN B USING(同名的列)</selectlist></p>
<p>前提:在emp和dept表中都有deptno列. 并且是外键关系。<br>如: SELECT * FROM emp JOIN dept USING (deptno)</p>
<p><img src="/2017/06/07/Java/MySQL/" alt="图"></p>
<h3 id="自连接查询"><a href="#自连接查询" class="headerlink" title="自连接查询:"></a>自连接查询:</h3><p>  把一张表看成两张来做查询.</p>
<p>需求: 查询每个商品分类的名称和父分类名称:</p>
<p>隐式内连接：<br>SELECT sub.dirName,super.dirName<br>FROM productdir super,productdir sub<br>WHERE sub.parent_id = super.id<br>显示内连接：<br>SELECT sub.dirName,super.dirName<br>FROM productdir super JOIN productdir sub<br>ON sub.parent_id = super.id</p>
<h4 id="DML"><a href="#DML" class="headerlink" title="DML"></a>DML</h4><p>插入语句:一次插入操作只插入一行.<br>INSERT INTO    table_name (column1,column2,column3…)<br>VALUES    (value1,value2,value3…);</p>
<hr>
<p>1.插入完整数据记录<br>2.插入数据记录一部分<br>3.插入多条数据记录（MySQL特有）<br> INSERT INTO    table_name (column1,column2,column3…)<br>   VALUES (value1,value2,value3…),<br>          (value1,value2,value3…),<br>          (value1,value2,value3…)..;</p>
<p>4.插入查询结果<br> INSERT INTO    table_name (column1,column2,column3…)<br>     SELECT (column1,column2,column3…)<br>     FROM table_name </p>
<p>UPDATE    table_name<br>SET    columnName = value [, columnName = value] …<br>[WHERE    condition];</p>
<p>DELETE  FROM    tablename<br>[WHERE    condition];<br>如果省略了where子句，则全表的数据都会被删除</p>
<p>数据备份和恢复</p>
<p>MySQL自身的数据库维护：<br>通过cmd命令进入dos窗口：<br>1.导出：mysqldump -u账户 -p密码 数据库名称&gt;脚本文件存储地址<br>   mysqldump -uroot -padmin jdbcdemo&gt; C:/shop_bak.sql<br>2.导入：mysql -u账户 -p密码 数据库名称&lt; 脚本文件存储地址<br>   mysql -uroot -padmin jdbcdemo&lt; C:/shop_bak.sql<br>Navicat工具的导入和导出：<br>Navicat工具的备份和还原：</p>

    
  </div>
</article>


   
  <div class="text-center donation">
    <div class="inner-donation">
      <span class="btn-donation">支持一下</span>
      <div class="donation-body">
        <div class="tip text-center">扫一扫，支持 fandy</div>
        <ul class="theme.donation.items.length">
        
          <li class="item">
            <img src="/images/qr-wechat.png" alt="">
          </li>
        
          <li class="item">
            <img src="/images/qr-alipay.png" alt="">
          </li>
        
        </ul>
      </div>
    </div>
  </div>


   
  <div class="box-prev-next clearfix">
    <a class="show pull-left" href="/2017/06/04/Java/注解/">
        <i class="icon icon-angle-left"></i>
    </a>
    <a class="hide pull-right" href="/">
        <i class="icon icon-angle-right"></i>
    </a>
  </div>




</div>


  <a id="backTop" class="back-top">
    <i class="icon-angle-up"></i>
  </a>




  <div class="modal" id="modal">
  <span id="cover" class="cover hide"></span>
  <div id="modal-dialog" class="modal-dialog hide-dialog">
    <div class="modal-header">
      <span id="close" class="btn-close">关闭</span>
    </div>
    <hr>
    <div class="modal-body">
      <ul class="list-toolbox">
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/archives/"
              rel="noopener noreferrer"
              target="_self"
              >
              博客
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/category/"
              rel="noopener noreferrer"
              target="_self"
              >
              分类
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/tag/"
              rel="noopener noreferrer"
              target="_self"
              >
              标签
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/link/"
              rel="noopener noreferrer"
              target="_self"
              >
              友链
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/about/"
              rel="noopener noreferrer"
              target="_self"
              >
              关于
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/atom.xml"
              rel="noopener noreferrer"
              target="_blank"
              >
              RSS
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/search/"
              rel="noopener noreferrer"
              target="_self"
              >
              搜索
            </a>
          </li>
        
      </ul>

    </div>
  </div>
</div>



  
      <div class="fexo-comments comments-post">
    
  <section class="disqus-comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
  </section>

  <script>
    var disqus_shortname = 'forsigner';
    
    var disqus_url = 'https://fandyliu.github.io/2017/06/07/Java/MySQL/';
    
    (function(){
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>

  <script id="dsq-count-scr" src="//forsigner.disqus.com/count.js" async></script>



    




    

    
	
  </div>

  

  <script type="text/javascript">
  function loadScript(url, callback) {
    var script = document.createElement('script')
    script.type = 'text/javascript';

    if (script.readyState) { //IE
      script.onreadystatechange = function() {
        if (script.readyState == 'loaded' ||
          script.readyState == 'complete') {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else { //Others
      script.onload = function() {
        callback();
      };
    }

    script.src = url;
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  window.onload = function() {
    loadScript('/js/bundle.js?235683', function() {
      // load success
    });
  }
</script>

</body>
</html>
